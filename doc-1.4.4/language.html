<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Liquidsoap</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <link rel="canonical" href="https://www.liquidsoap.info/" />
    <!--  Social tags      -->
    <meta name="keywords" content="radio, audio, video, streaming, icecast, shoutcast">
    <meta name="description" content="Swiss-army knife for multimedia streaming">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Liquidsoap Streaming Language">
    <meta itemprop="description" content="Swiss-army knife for multimedia streaming">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@LiquidsoapMedia">
    <meta name="twitter:title" content="Liquidsoap Streaming Language">
    <meta name="twitter:description" content="Swiss-army knife for multimedia streaming">
    <meta name="twitter:creator" content="@LiquidsoapMedia">
    <meta name="twitter:image" content="https://www.liquidsoap.info//assets/img/bottle_invert.png">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/custom.css" rel="stylesheet" />
    <link href="/assets/css/material-kit.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <!-- Documentation extras -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/demo/docs.min.css">
    <style>
    .navbar-absolute-logo {
      padding-left: 45px;
    }

    .navbar-absolute-logo img {
      position: absolute;
      left: 15px;
      margin-top: -6px;
    }

    body {
      background: white;
    }

    p {
        font-size: 16px;
        text-align: justify;
    }
    </style>
    <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
  </head>

  <body class="bd-docs" data-spy="scroll" data-target=".bd-sidenav-active">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <header class="navbar navbar-expand navbar-dark bg-primary flex-column flex-md-row bd-navbar">
      <a class="navbar-brand mr-0 mr-md-2 navbar-absolute-logo" href="/doc-1.4.4">
        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 600 600" focusable="false" style="width: 25px; height: 25px;">
          <title>Liquidsoap</title>
          <style type="text/css">
.st0{fill:#FFFFFF;}
          </style>
          <g>
          <path class="st0" d="M102.4,593.8c-0.7-2.8-3.4-2.5-5.3-3.3c-24.6-10.2-37.2-28.7-37.2-55.6c-0.1-72.1,0-144.2,0-216.3
          c0-52.3,0-104.6,0-156.9c0-37.6,23.1-60.9,60.6-61.1c12-0.1,23.9-0.2,35.9,0c15.7,0.3,26.7,10.1,26.3,23
          c-0.4,12.5-11.1,21.5-26.3,21.8c-12,0.2-23.9-0.1-35.9,0.1c-11.8,0.1-15.6,3.7-15.6,15.3c-0.1,124.4,0,248.8-0.1,373.2
          c0,10.3,4.5,15.1,14.8,15.1c69.1-0.1,138.2,0,207.3-0.1c12.3,0,15.5-3.7,15.5-17.7c0-74.7,0-149.4,0-224.2c0-47.8,0-95.6,0-143.5
          c0-15.2-3-18.1-18.4-18.2c-10.8,0-21.7,0.1-32.5,0c-16-0.2-26.7-9.4-26.6-22.5c0.1-13,10.9-22.1,26.9-22.3
          c13.4-0.2,26.9-0.3,40.3,0.1c30.8,1,54.9,24.5,55,55.2c0.3,127.4,0.3,254.8,0.1,382.2c0,25.5-15.8,45.7-40.2,53.3
          c-1.7,0.5-3.8,0-4.5,2.4C262.3,593.8,182.4,593.8,102.4,593.8z"/>
          <path class="st0" d="M537.4,212.6c-16.8,23-56.5,16.5-68.6-9.5c-8-17.2-12.4-32.7-12-54.5c4.6,4.1,8.3,7.5,12.1,10.7
          c10.3,8.6,21,14,35.5,11.8c12.5-1.9,21.5,6,28.2,16.3c2,3,1.3,7.3,4.8,9.5C537.4,202.2,537.4,207.4,537.4,212.6z"/>
          <path class="st0" d="M200.6,230.4c0-55.3,0-110.5,0-165.8c0-40.7,22.3-62.7,63.2-62.7c50.4,0,100.8,0,151.3,0
          c36.1,0,59.1,21.9,60.4,57.7c0.5,13.1,0.4,26.1,0,39.2c-0.4,15.1-10.1,25.8-22.5,25.7c-12-0.1-21.6-10.1-22.3-24.8
          c-0.6-12.7-0.4-25.4-0.1-38.1c0.2-10.4-4.5-14.9-14.9-14.9c-51.5,0.1-103.1,0-154.6,0.1c-12.7,0-15.5,3.2-15.5,17.5
          c0,105.3,0,210.6,0,316c0,7.8,0.1,15.7,0,23.5c-0.2,17.5-9.4,28.9-23,28.6c-13.5-0.3-21.9-10.9-21.9-28.3
          C200.6,346.2,200.6,288.3,200.6,230.4z"/>
          </g>
        </svg>
        Liquidsoap
      </a>
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item dropdown">
          <a data-versions="dev 1.4.4 2.1.4 2.2.0 2.2.1 2.2.2 2.2.3
2.2.4 2.2.5
2.3.0" data-version="1.4.4" class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="liq-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            1.4.4
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="liq-version" id="liq-versions">
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://github.com/savonet/liquidsoap" target="_blank" rel="noopener" aria-label="GitHub">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false">
              <title>GitHub</title>
              <path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://twitter.com/savonet" target="_blank" rel="noopener" aria-label="Twitter">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false">
              <title>Twitter</title>
              <path d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92" fill="currentColor" />
            </svg>
          </a>
        </li>
      </ul>
      <div class="navbar-nav-scroll ml-md-auto ">
        <ul class="navbar-nav bd-navbar-nav flex-row">
          <!--
            <li class="nav-item">
            <a class="nav-link" href=""> <i class="material-icons">card_membership</i> PRO Services </a>
            </li>
          -->
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/savonet/liquidsoap/issues" target="_blank" rel="noopener"><i class="material-icons">star</i> Get Help</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/savonet/liquidsoap" class="github-corner" aria-label="View source on Github">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#9c27b0; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
      </a>
      <style>
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0)
          }
          20%,
          60% {
            transform: rotate(-25deg)
          }
          40%,
          80% {
            transform: rotate(10deg)
          }
        }

        @media (max-width:500px) {
          .github-corner:hover .octo-arm {
            animation: none
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
          }
        }
      </style>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
          <nav class="collapse bd-links" id="bd-docs-nav">
            <div class="bd-toc-item active">
              <ul class="nav bd-sidenav">
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/doc-1.4.4/install.html">
                    Install
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="#">
                    General tutorials
                  </a>
                </li>
                <li>
                  <a href="/doc-1.4.4/quick_start.html">Quickstart</a></li>
                <li>
                  <a href="/doc-1.4.4/presentations.html">Presentations</a></li>
                <li>
                  <a href="/doc-1.4.4/complete_case.html">Complete case analysis</a></li>
                <li>
                  <a href="/doc-1.4.4/advanced.html">Advanced</a></li>
                <li>
                  <a href="/doc-1.4.4/help.html">How to find help</a></li>
                <li>
                  <a href="/doc-1.4.4/cookbook.html">Cookbook</a></li>
                <li>
                  <a href="/doc-1.4.4/faq.html">Frequently Asked Questions</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Reference
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-1.4.4/reference.html">API reference</a></li>
                <li>
                  <a href="/doc-1.4.4/protocols.html">Protocols</a></li>
                <li>
                  <a href="/doc-1.4.4/settings.html">Settings</a></li>
                <li>
                  <a href="/doc-1.4.4/language.html">Script language</a></li>
                <li>
                  <a href="/doc-1.4.4/encoding_formats.html">Encoding formats</a></li>
                <li>
                  <a href="/doc-1.4.4/playlist_parsers.html">Playlist parsers</a></li>
                <li>
                  <a href="/doc-1.4.4/json.html">JSON import/export</a></li>
                <li>
                  <a href="/doc-1.4.4/ladspa.html">LADSPA plugins</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Core
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-1.4.4/sources.html">Sources</a></li>
                <li>
                  <a href="/doc-1.4.4/clocks.html">Clocks</a></li>
                <li>
                  <a href="/doc-1.4.4/requests.html">Requests</a></li>
                <li>
                  <a href="/doc-1.4.4/stream_content.html">Stream contents</a></li>
                <li>
                  <a href="/doc-1.4.4/script_loading.html">Script loading</a></li>
                <li>
                  <a href="/doc-1.4.4/phases.html">Execution phases</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Specific tutorials
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-1.4.4/blank.html">Blank detection</a></li>
                <li>
                  <a href="/doc-1.4.4/metadata.html">Customize metadata</a></li>
                <li>
                  <a href="/doc-1.4.4/seek.html">Seek and cue support</a></li>
                <li>
                  <a href="/doc-1.4.4/external_decoders.html">External decoders</a></li>
                <li>
                  <a href="/doc-1.4.4/external_streams.html">External streams</a></li>
                <li>
                  <a href="/doc-1.4.4/external_encoders.html">External encoders</a></li>
                <li>
                  <a href="/doc-1.4.4/hls_output.html">HLS output</a></li>
                <li>
                  <a href="/doc-1.4.4/http_input.html">HTTP input</a></li>
                <li>
                  <a href="/doc-1.4.4/harbor.html">Harbor input</a></li>
                <li>
                  <a href="/doc-1.4.4/harbor_http.html">Interaction with the Harbor</a></li>
                <li>
                  <a href="/doc-1.4.4/server.html">Interaction with the server</a></li>
                <li>
                  <a href="/doc-1.4.4/icy_metadata.html">ICY metadata update</a></li>
                <li>
                  <a href="/doc-1.4.4/replay_gain.html">Normalization and replay gain</a></li>
                <li>
                  <a href="/doc-1.4.4/request_sources.html">Requests-based sources</a></li>
                <li>
                  <a href="/doc-1.4.4/shoutcast.html">Shoutcast output</a></li>
                <li>
                  <a href="/doc-1.4.4/dynamic_sources.html">Dynamic source creation</a></li>
                <li>
                  <a href="/doc-1.4.4/crossfade.html">Smart crossfading</a></li>
                <li>
                  <a href="/doc-1.4.4/in_production.html">Using in production</a></li>
                <li>
                  <a href="/doc-1.4.4/flows.html">Liquid Flows</a></li>
                <li>
                  <a href="/doc-1.4.4/video.html">Videos streams</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    User scripts
                  </a>
                </li>
                <li>
                  <a href="/doc-1.4.4/beets.html">Beets</a></li>
                <li>
                  <a href="/doc-1.4.4/geekradio.html">Geekradio</a></li>
                <li>
                  <a href="/doc-1.4.4/radiopi.html">RadioPi</a></li>
                <li>
                  <a href="/doc-1.4.4/dolebrai.html">Dolebraï</a></li>
                <li>
                  <a href="/doc-1.4.4/frequence3.html">Frequence3</a></li>
                <li>
                  <a href="/doc-1.4.4/radio-nova.html">Listen to Radio Nova</a></li>
                <li>
                  <a href="/doc-1.4.4/video-static.html">Video with a single static image</a></li>
                <li>
                  <a href="/doc-1.4.4/split-cue.html">Split a CUE sheet</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    Behind the curtains
                  </a>
                </li>
                <li>
                  <a href="/doc-1.4.4/publications.html">Some presentations and publications</a></li>
                <li>
                  <a href="/modules.html">OCaml libraries</a></li>
                <li>
                  <a href="/modules/liquidsoap/index.html">Documentation of some internals</a></li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/legacy">
                    Legacy website
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <!--
          <div class="d-none d-xl-block col-xl-2 bd-toc">
          <ul class="section-nav">
          <li class="toc-entry toc-h2">
          <a href="#quick-start">Quick start</a>
          <ul>
          <li class="toc-entry toc-h3">
          <a href="#css">CSS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#js">JS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#fonts-and-icons">Fonts and Icons</a>
          </li>
          </ul>
          </li>
          <li class="toc-entry toc-h2">
          <a href="#starter-template">Starter template</a>
          </li>
          </ul>
          </div>
        -->
          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
          <h1 id="liquidsoaps-scripting-language"><a
href="#liquidsoaps-scripting-language" class="anchor">Liquidsoap’s
scripting language</a></h1>
<p>Liquidsoap’s scripting language is a simple functional language, with
labels and optional parameters. It is statically typed, but infers types
– you don’t have to write any types. It allows the direct handling of
liquidsoap notions such as <a href="sources.html">sources</a> and <a
href="requests.html">requests</a>, and also provides a convenient syntax
for specifying time intervals.</p>
<p>The language’s parser expects UTF8 as input so you should make sure
that your scripts are written in this encoding, in particular if you
include strings or variable names with non-ASCII characters in them.</p>
<h2 id="constants"><a href="#constants"
class="anchor">Constants</a></h2>
<p>The constants and their syntax are quite common:</p>
<ul>
<li>integers, such as <code>42</code>;</li>
<li>floats, such as <code>3.14</code>;</li>
<li>booleans <code>true</code> and <code>false</code>;</li>
<li>strings, such as <code>"foo"</code> or <code>'bar'</code>.</li>
</ul>
<p><strong>Beware</strong>: <code>3.0</code> is not an integer and
<code>5</code> is not a float, the dot matters.</p>
<p>Strings might be surrounded by double or single quotes. In both
cases, you can escape the quote you’re using:
<code>"He said: \"Hello, you\"."</code> is valid but
<code>'He said: "Hello, you".'</code> is equivalent and nicer.</p>
<p>You can include variables in a string using the <code>#{...}</code>
syntax: <code>"foo #{quote(my_var)} bar"</code> is equivalent to
<code>"foo " ^ quote(my_var) ^ " bar"</code>.</p>
<p>Finally, strings can be interpolated using the following syntax:</p>
<pre><code># s = &#39;This is an $(name) string. \
       This is a $(if $(value),&quot;$(value)&quot;,&quot;undefined&quot;) value.&#39;;;
# s % [(&quot;name&quot;,&quot;interpolated&quot;)];;
- : string = &quot;This is an interpolated string.This is a undefined value.&quot;
# s % [(&quot;name&quot;,&quot;interpolated&quot;),(&quot;value&quot;,&quot;defined&quot;)];;
- : string = &quot;This is an interpolated string.This is a defined value.&quot;</code></pre>
<p>Most notably, <code>output.file</code> can use string interpolation
to specify a different file name using the source’s metadata.</p>
<h2 id="expressions"><a href="#expressions"
class="anchor">Expressions</a></h2>
<p>You can form expressions by using:</p>
<ul>
<li>Constants and variable identifiers. Identifiers start with an
alphabetic character or an underscore, followed by alphanumerics,
underscores, dots and quotes:
<code>[A-Z a-z _][A-Z a-z 0-9 _.']*</code>.</li>
<li>Lists and pairs: <code>[expr,expr,...]</code> and
<code>(expr,expr)</code>.</li>
<li>Comparison of values is done using <code>expr == expr</code> and its
negation is <code>expr != expr</code>. Most other usual operations are
available, allowing usual things like <code>1+1 &lt; 11</code>.</li>
<li>Application <code>f(x,y)</code> of arguments to a function.
Application of labeled parameters is as follows:
<code>f(x,foo=1,y,bar="baz")</code>. The interest of labels is that the
order of two parameters doesn’t matter as long as they have different
labels.</li>
<li>Anonymous functions: <code>fun (arglist) -&gt; expr</code>. Some
arguments might have a label or an optional value. For example, the
definition of a function with two named parameters, the second one being
optional with default value <code>13</code> is as follows:
<code>fun (~foo,~bar=13) -&gt; ...</code>.</li>
<li>Definitions using def-end: <code>def pi = 3.14 end</code> defining a
ground value, <code>def source(x) = wrap2(wrap1(x)) end</code> defining
a function. The <code>=</code> is optional, you may prefer multi-line
definitions without it. The arguments of a defined function are
specified in the same way as for anonymous functions.</li>
<li>Shorter definitions using the equality: <code>pi = 3.14</code>. This
is never an assignment, only a new local definition!</li>
<li>Conditionals <code>if expr then expr else expr end</code>, or more
generally
<code>if expr then expr (elsif expr then expr)* (else expr)? end</code>
. The <code>else</code> block can be omitted if the purpose of the
conditional is not to compute a value (<em>e.g.</em> an integer or a
list of strings) but only to have a side effect (<em>e.g.</em> printing
something in one case, not doing anything in the other).</li>
<li>Sequencing: expressions may be sequenced, just juxtapose them.
Usually one puts one expression per line. Optionally, they can be
separated by a semicolon. The evaluation of a sequence triggers that of
all of its sub-expressions, its value is that of the last
sub-expression. Accordingly, the type of a sequence is that of its last
sub-expression.</li>
<li>Variable references are defined as:
<code>reference = ref "some string"</code>. New values can be set via:
<code>reference := "new value"</code>. The contents of a reference can
be retrieved by <code>!reference</code>.</li>
<li>Parenthesis can be used to delimit explicitly expressions. In some
places where only expressions can be written, as opposed to sequences of
expressions, the <code>begin .. end</code> block can be used to
explicitly form a simple expression from a sequence. This notably
happens with the simple form of definitions without
<code>def .. end</code>, and in the body of anonymous functions. For
example <code>fun (x) -&gt; f1(x) ; f2(x)</code> will be read as
<code>(fun (x) -&gt; f1(x)) ; f2(x)</code> not as
<code>fun (x) -&gt; begin f1(x) ; f2(x) end</code>.</li>
<li>Code blocks: <code>{ expr }</code> is a shortcut for
<code>fun () -&gt; expr</code>.</li>
</ul>
<p><strong>No assignment, only definitions.</strong>
<code>x = expr</code> doesn’t modify <code>x</code>, it just defines a
new <code>x</code>. The expression
<code>(x = s1 ; def y = x = s2 ; (x,s3) end ; (y,x))</code> evaluates to
<code>((s2,s3),s1)</code>.</p>
<p><strong>Function.</strong> The return value of a function is the
evaluation of its body where parameters have been substituted by their
values. Accordingly, the type of the body is the return type of the
function. If the body is a sequence, the return value will thus be its
last expression, and the return type its type.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="dt">foo</span> ()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">a</span> = <span class="dt">bar</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">b</span> = <span class="dv">1</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;string&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The return type of foo is string.</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The full type of foo is ()-&gt;string.</span></span></code></pre></div>
<p>Recursive functions can be defined using the <code>rec</code>
keyword:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="kw">rec</span> <span class="dt">fact</span>(n) =</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">if</span> <span class="va">n</span> == <span class="dv">1</span> <span class="kw">then</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">else</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    n * <span class="dt">fact</span>(n<span class="dv">-1</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p><strong>Type of an application.</strong> The type of an application
is the return type of function if all mandatory arguments are applied.
With the function <code>foo</code> previously defined,
<code>foo()</code> is a string. Otherwise, the application is
``partial’’, and the expression still has a function type.</p>
<p><strong>Partial application.</strong> Application of arguments can be
partial. For example if <code>f</code> takes two integer arguments,
<code>f(3)</code> is the function waiting for the second argument. This
can be useful to instantiate once for all dummy parameters of a
function:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">out</span> = <span class="dt">output.icecast</span>(<span class="ot">%vorbis</span>, <span class="va">host</span>=<span class="st">&quot;streamer&quot;</span>,<span class="va">port</span>=<span class="st">&quot;8080&quot;</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                            <span class="va">password</span>=<span class="st">&quot;sesame&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># out is a function waiting for the other parameters</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="dt">out</span>(<span class="va">bitrate</span>=<span class="dv">112</span>, my_radio)</span></code></pre></div>
<p><strong>Labels.</strong> Labeled and unlabeled parameters can be
given at any place in an application. The order of the arguments is up
to permutation of arguments of distinct labels. For example
<code>f(x,foo=1)</code> is the same as <code>f(foo=1,x)</code>, both are
valid for any function <code>f(x,~foo,...)</code>. It makes things
easier for the user, and gives its full power to the partial
application.</p>
<p><strong>Optional arguments.</strong> Functions can be defined with an
optional value for some parameter (as in
<code>def f(x="bla",~foo=1) = ... end</code>), in which case it is not
required to apply any argument on the label <code>foo</code>. The
evaluation of the function is triggered after the first application
which instantiated all mandatory parameters.</p>
<h2 id="types"><a href="#types" class="anchor">Types</a></h2>
<p>We believe in static typing especially for a script which is intended
to run during weeks: we don’t want to notice a mistake only when the
special code for your rare live events is triggered! Moreover, we find
it important to show that even for a simple script language like that,
it is worth implementing type inference. It’s not that hard, and makes
life easier.</p>
<p>The basic types are <code>int</code>, <code>float</code>,
<code>bool</code> and <code>string</code>. Corresponding to pairs and
lists, you get <code>(T*T)</code> and <code>[T]</code> types – all
elements of a list should have the same type. For example,
<code>[(1,"un"),(2,"deux")]</code> has type
<code>[(int*string)]</code>.</p>
<p>There are several types that are specific to liquidsoap, such as
<code>source</code>, <code>request</code>, <code>format</code>. Those
three types are parametrized by the kind of stream that they carry. This
is described in more details in a <a
href="stream_content.html">dedicated page</a>.</p>
<p>A function type is noted as
<code>(arg_types) -&gt; return_type</code>. Labeled arguments are
denoted as <code>~label:T</code> or <code>?label:T</code> for optional
arguments. For example the following function has type
<code>(source,source,?jingle:string) -&gt; source</code> .</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fun</span> (from,to,<span class="va">~jingle</span>=default) -&gt;</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">add</span> ([ <span class="dt">sequence</span>([<span class="dt">single</span>(jingle), <span class="dt">fallback</span>([])]),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>         <span class="dt">fade.in</span>(to) ])</span></code></pre></div>
<h2 id="time-intervals"><a href="#time-intervals" class="anchor">Time
intervals</a></h2>
<p>The scripting language also has a syntax extension for simply
specifying time intervals.</p>
<p>A date can be specified as <code>_w_h_m_s</code> where <code>_</code>
are integers. It has the following meaning:</p>
<ul>
<li><code>w</code> stands for weekday, ranging from 0 to 7, where 1 is
monday, and sunday is both 0 and 7.</li>
<li><code>h</code> stands for hours, ranging from 0 to 23.</li>
<li><code>m</code> stands for minutes, from 0 to 59.</li>
<li><code>s</code> stands for seconds, from 0 to 59.</li>
</ul>
<p>All components <code>w</code>, <code>h</code>, <code>m</code> and
<code>s</code> are optional. Finally, the <code>m</code> can be omitted
in dates of the form <code>_h_</code> such as <code>12h30</code>.</p>
<p>It is possible to use 24 (resp. 60) as the upper bound for hours
(resp. seconds or minutes) in an interval, for example in
<code>12h-24h</code>.</p>
<p>Time intervals can be either of the form <code>DATE-DATE</code> or
simply <code>DATE</code>. Their meaning should be intuitive:
<code>10h-10h30</code> is valid everyday between 10:00 and 10:30;
<code>0m</code> is valid during the first minute of every hour.</p>
<p>This is typically used for specifying switch predicates:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">switch</span>([</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  ({ <span class="dv">20</span>h<span class="dv">-22</span>h30 }, prime_time),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  ({ <span class="dv">1</span>w }, monday_source),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  ({ (<span class="dv">6</span>w <span class="kw">or</span> <span class="dv">7</span>w) <span class="kw">and</span> <span class="dv">0</span>h<span class="dv">-12</span>h }, week_ends_mornings),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  ({ <span class="dv">true</span> }, default_source)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>])</span></code></pre></div>
<h2 id="includes"><a href="#includes" class="anchor">Includes</a></h2>
<p>You can include other files, to compose complex configurations from
multiple blocks of utility or configuration directives.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store passwords in another configuration file,</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># so that the main config can be safely version-controlled.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ot">%include &quot;passwords.liq&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the definitions from the other file here.</span></span></code></pre></div>
<p>In the command <code>%include "file"</code> the path is relative to
the script file. In <code>%include &lt;file&gt;</code>, it is relative
to the library directory of Liquidsoap.</p>
          <div id="footer"></div>
        </main>
      </div>
    </div>
    <!--   Core JS Files   -->

    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/assets/js/liq-jquery.js" type="text/javascript"></script>
  </body>

</html>
